<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>TEST</title>
  <script src="client.js"></script>
  <script src="client_logic.js"></script>
</head>
<body id="body">
  <textarea id="text" readonly=true style="display: block; width: 100%; height: 100%; resize: none;"></textarea>
  <script type="text/javascript">

    var gcb = new GameClient("52.232.32.105:8080", "runnner@gmail.com", "runner2");
    var gameManager = new GameManager(gcb, text);

    gcb.run(gameManager.logic.bind(gameManager));

    gcb.onopen = function()
    {
      text.value += "Соединение установлено.\n";
      text.value += gameManager.state + "\n";
    };

    gcb.onclose = function(event)
    {
      if (event.wasClean)
        text.value += "Соединение закрыто чисто";
      else
        text.value += "Обрыв соединения";

      text.value += " - Код: " + event.code + ", Причина: " + event.reason + "\n";
    };

    gcb.onerror = function(error)
    {
      text.value += "Ошибка: " + error.message + "\n";
    };
  </script>
</body>
</html>
